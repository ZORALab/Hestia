{{- /*
Page's JSON Output Prime Control

This file is your JSON output file (index.html). Hugo's and Go's template
processors are available at your disposal in case of mathematical or logical
algorithms development.
*/ -}}
{{- /* prepare variables for function */ -}}
{{- $Page := . -}}
{{- $dataList := dict -}}
{{- $i18n := .Data.Page.i18n -}}
{{- $list := slice -}}
{{- $l2 := slice -}}
{{- $l3 := slice -}}
{{- $l4 := slice -}}
{{- $media := false -}}
{{- $ret := false -}}




{{- /* execute function */ -}}
{{- $dataList = merge $dataList (dict
	$i18n.Labels.Title .Titles.Page
	$i18n.Labels.Description
		(printf "%s %s" .Descriptions.Page.Pitch .Descriptions.Page.Summary)
) -}}




{{- /* render content */ -}}
{{- $l2 = slice -}}
{{- range $unused2, $h2 := $i18n.H2 -}}
	{{- $l3 = slice -}}
	{{- range $unused3, $h3 := $h2.H3 -}}
		{{- $l4 = slice -}}
		{{- range $unused4, $h4 := $h3.H4 -}}
			{{- $list = slice -}}
			{{- range $i, $v := $h4.URL -}}
				{{- if and (not $v.Value) (not $v.Label) -}}
					{{- continue -}}
				{{- end -}}

				{{- $ret = merge $Page (dict
					"Input" (dict "Data" $v.Value)
				) -}}
				{{- $ret = partial "hestiaURL/Sanitize" $ret -}}
				{{- $list = append (dict
					$i18n.Labels.URL (string $ret.Output)
					$i18n.Labels.Label $v.Label
				) $list -}}
			{{- end -}}


			{{- $media = merge $Page (dict "Input" (dict "Data" $h4.Media)) -}}
			{{- $media = partial "hestiaMEDIA/Sanitize" $media -}}
			{{- $media = $media.Output -}}


			{{- $l4 = append (dict
				$i18n.Labels.Title $h4.Title
				$i18n.Labels.Description $h4.Plain
				$i18n.Labels.Code $h4.Code
				$i18n.Labels.URL $list
				$i18n.Labels.Media $media
			) $l4 -}}
		{{- end -}}


		{{- $list = slice -}}
		{{- range $i, $v := $h3.URL -}}
			{{- if and (not $v.Value) (not $v.Label) -}}
				{{- continue -}}
			{{- end -}}

			{{- $ret = merge $Page (dict
				"Input" (dict "Data" $v.Value)
			) -}}
			{{- $ret = partial "hestiaURL/Sanitize" $ret -}}
			{{- $list = append (dict
				$i18n.Labels.URL (string $ret.Output)
				$i18n.Labels.Label $v.Label
			) $list -}}
		{{- end -}}


		{{- $media = merge $Page (dict "Input" (dict "Data" $h3.Media)) -}}
		{{- $media = partial "hestiaMEDIA/Sanitize" $media -}}
		{{- $media = $media.Output -}}


		{{- $l3 = append (dict
			$i18n.Labels.Title $h3.Title
			$i18n.Labels.Description $h3.Plain
			$i18n.Labels.Code $h3.Code
			$i18n.Labels.URL $list
			$i18n.Labels.Content $l4
			$i18n.Labels.Media $media
		) $l3 -}}
	{{- end -}}


	{{- $list = slice -}}
	{{- range $i, $v := $h2.URL -}}
		{{- if and (not $v.Value) (not $v.Label) -}}
			{{- continue -}}
		{{- end -}}

		{{- $ret = merge $Page (dict
			"Input" (dict "Data" $v.Value)
		) -}}
		{{- $ret = partial "hestiaURL/Sanitize" $ret -}}
		{{- $list = append (dict
			$i18n.Labels.URL (string $ret.Output)
			$i18n.Labels.Label $v.Label
		) $list -}}
	{{- end -}}


	{{- $media = merge $Page (dict "Input" (dict "Data" $h2.Media)) -}}
	{{- $media = partial "hestiaMEDIA/Sanitize" $media -}}
	{{- $media = $media.Output -}}


	{{- $l2 = append (dict
		$i18n.Labels.Title $h2.Title
		$i18n.Labels.Description $h2.Plain
		$i18n.Labels.Code $h2.Code
		$i18n.Labels.URL $list
		$i18n.Labels.Content $l3
		$i18n.Labels.Media $media
	) $l2 -}}
{{- end -}}
{{- $dataList = merge $dataList (dict $i18n.Labels.Content $l2) -}}




{{- /* render output */ -}}
{{- jsonify $dataList -}}
