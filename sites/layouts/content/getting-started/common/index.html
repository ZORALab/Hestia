{{- /* prepare variables for function */ -}}
{{- $Page := . -}}
{{- $i18n := .Data.Page.i18n -}}
{{- $lang := false -}}
{{- $nav := slice -}}
{{- $ret := false -}}




{{- /* render output */ -}}
<main style='padding-bottom: 0;'>
	{{- $nav = append (dict
		"ID" $i18n.Introduction.ID
		"Label" $i18n.Introduction.Title
	) $nav -}}
	<section id='{{- $i18n.Introduction.ID -}}'>
		<h1>{{- .Titles.Page -}}</h1>
		<p>{{- .Descriptions.Page.Pitch }} {{ .Descriptions.Page.Summary -}}</p>
	</section>


	{{- range $unused, $subjectH2 := $i18n.H2 -}}
		{{- $nav = append (dict "ID" $subjectH2.ID "Label" $subjectH2.Title) $nav }}
	<section id='{{- $subjectH2.ID -}}'>
		<h2>{{- $subjectH2.Title -}}</h2>
		<p>{{- $subjectH2.HTML -}}</p>

		{{- range $i, $v := $subjectH2.URL }}
			{{- if and (not $v.Value) (not $v.Label) -}}
				{{- continue -}}
			{{- end -}}

			{{- $ret = merge $Page (dict "Input" (dict "Data" $v.Value)) -}}
			{{- $ret = partial "hestiaURL/Sanitize" $ret }}
		<a href='{{- string $ret.Output -}}' class='button'>{{- $v.Label -}}</a>
		{{- end }}

		{{- if $subjectH2.Code }}
		<pre>{{- htmlEscape $subjectH2.Code -}}</pre>
		{{- end }}

		{{- if $subjectH2.Media }}
			{{- $ret = merge $Page (dict "Input" (dict "Data" $subjectH2.Media)) -}}
			{{- $ret = partial "hestiaMEDIA/Sanitize" $ret -}}
			{{- $ret = $ret.Output }}
		{{ partial "hestiaMEDIA/ToHTML" $ret }}
		{{- end }}

		{{- range $unusedH3, $subjectH3 := $subjectH2.H3 }}
			{{- $nav = append (dict
				"ID" $subjectH3.ID
				"Label" $subjectH2.Title
			) $nav }}
		<section id='{{- $subjectH3.ID -}}'>
			<h3>{{- $subjectH3.Title -}}</h3>
			<p>{{- $subjectH3.HTML -}}</p>


			{{- range $i, $v := $subjectH3.URL }}
				{{- if and (not $v.Value) (not $v.Label) -}}
					{{- continue -}}
				{{- end -}}

				{{- $ret = merge $Page (dict "Input" (dict "Data" $v.Value)) -}}
				{{- $ret = partial "hestiaURL/Sanitize" $ret }}
			<a href='{{- string $ret.Output -}}' class='button'>{{- $v.Label -}}</a>
			{{- end }}


			{{- if $subjectH3.Code }}
			<pre>{{- htmlEscape $subjectH3.Code -}}</pre>
			{{- end }}


			{{- if $subjectH3.Media }}
				{{- $ret = merge $Page (dict "Input"
					(dict "Data" $subjectH3.Media)
				) -}}
				{{- $ret = partial "hestiaMEDIA/Sanitize" $ret -}}
				{{- $ret = $ret.Output }}
			{{ partial "hestiaMEDIA/ToHTML" $ret }}
			{{- end }}
		</section>


			{{- range $unusedH4, $subjectH4 := $subjectH3.H4 }}
			<section id='{{- $subjectH4.ID -}}'>
				<h4>{{- $subjectH4.Title -}}</h3>
				<p>{{- $subjectH3.HTML -}}</p>


				{{- range $i, $v := $subjectH4.URL }}
					{{- if and (not $v.Value) (not $v.Label) -}}
						{{- continue -}}
					{{- end -}}

					{{- $ret = merge $Page (dict
						"Input" (dict "Data" $v.Value)
					) -}}
					{{- $ret = partial "hestiaURL/Sanitize" $ret }}
				<a href='{{- string $ret.Output -}}' class='button'>
					{{- $v.Label -}}
				</a>
				{{- end }}


				{{- if $subjectH4.Code }}
				<pre>{{- htmlEscape $subjectH4.Code -}}</pre>
				{{- end }}


				{{- if $subjectH4.Media }}
					{{- $ret = merge $Page (dict "Input"
						(dict "Data" $subjectH4.Media)
					) -}}
					{{- $ret = partial "hestiaMEDIA/Sanitize" $ret -}}
					{{- $ret = $ret.Output }}
				{{ partial "hestiaMEDIA/ToHTML" $ret }}
				{{- end }}
			</section>
			{{- end }}
		{{- end }}
	</section>
	{{- end }}


	{{- $nav = append (dict "ID" $i18n.Epilogue.ID "Label" $i18n.Epilogue.Title) $nav }}
	{{- $ret = merge $Page (dict "Input" (dict "Data"
		"/img/backgrounds/matrix-cube-lorenzo-verzini.svg"
	)) -}}
	{{- $ret = partial "hestiaURL/Sanitize" $ret -}}
	{{- $ret = string $ret.Output -}}
	<section id='{{- $i18n.Epilogue.ID -}}' class='inverted' style='
		margin-top: 10rem;
		background: url({{- $ret -}}),linear-gradient(to top,#010329,#000005)
				no-repeat
				fixed;
		background-position: center center;
		background-size: cover;
		padding-bottom: var(--main-padding-top);
	'>
		<h2 style='color: #fafafa;'>{{- $i18n.Epilogue.Title -}}</h2>
		<p style='color: #fafafa;'>{{- $i18n.Epilogue.Description -}}</p>
		<br/>
		{{- $ret = merge $Page (dict "Input" (dict "Data" $i18n.Epilogue.URL)) -}}
		{{- $ret = partial "hestiaURL/Sanitize" $ret -}}
		{{- $ret = string $ret.Output -}}
		<a href='{{- $ret -}}' class='button' style='
			--button-color: white;
			background: green;
			border: none;
		'>{{- $i18n.Epilogue.CTA -}}</a>
	</section>
</main>
{{ partial "common/footer.html" $Page }}
<nav class='right-drawer'>
	<input id='nav-secondary-drawer' type='checkbox' />
	<label class='trigger' for='nav-secondary-drawer'>
		<span class='open'>¬ß</span>
		<span class='close'>ùñ∑</span>
	</label>
	<label class='overlay' for='nav-secondary-drawer'></label>


	<div class='content'><div class='row' style='
		margin-top: 6rem;
		--grid-flex-direction: column;
		--grid-gap: 30px;
		--anchor-color: white;
	'>
		{{- range $i, $v := $nav }}
		<div class='column'>
			<a href='#{{- $v.ID -}}'
				onclick='document.getElementById("nav-secondary-drawer").checked = false;'
				class='prestige'>{{- $v.Label -}}</a>
		</div>
		{{- end }}
	</div></div>
</nav>
{{ partial "common/nav-prime.html" $Page }}
