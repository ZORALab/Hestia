{{- /* prepare variables for function */ -}}
{{- $Page := . -}}
{{- $i18n := .Data.Page.i18n -}}
{{- $dataset := index .Data.Store.Releases $i18n.Version -}}
{{- $lang := index $dataset.Metadata.Languages .Languages.Current.ID -}}
{{- $data := false -}}
{{- $ret := false -}}




{{- /* render output */ -}}
<main style='padding-bottom: 0;'>
	<section id='{{- $i18n.Introduction.ID -}}'>
		<h1>{{- $Page.Titles.Page -}}</h1>
		<p>{{- .Descriptions.Page.Pitch }} {{ .Descriptions.Page.Summary -}}</p>
	</section>


	<section id='{{- $i18n.Downloads.ID -}}'>
		<h2>{{- $i18n.Downloads.Title -}}</h2>
		<p>{{- $i18n.Downloads.Description -}}</p>
		<table>
			<thead>
				<tr>
					<th>{{- $i18n.Downloads.Package -}}</th>
					<th>{{- $i18n.Downloads.Certificate -}}</th>
					<th>{{- $i18n.Downloads.GPGKey -}}</th>
					<th>{{- $i18n.Downloads.SHA512 -}}</th>
				</tr>
			</thead>
			<tbody>
				{{- range $i, $v := $dataset.Assets }}
				<tr>
					<td>
						{{- $ret = merge $Page (dict "Input"
							(dict "Data" $v.URL)
						) -}}
						{{- $ret = partial "hestiaURL/Sanitize" $ret -}}
						{{- $ret = string $ret.Output }}
						<a href='{{- $ret -}}' class='button' download>
							{{- $v.Label -}}
						</a>
					</td>
					<td>
						{{- $ret = merge $Page (dict "Input"
							(dict "Data" $v.GPG.URL)
						) -}}
						{{- $ret = partial "hestiaURL/Sanitize" $ret -}}
						{{- $ret = string $ret.Output }}
						<a href='{{- $ret -}}' class='button' download>
							{{- $i18n.Downloads.Download -}}
						</a>
					</td>
					<td>
						{{- $ret = $Page.Data.Store.GPG.Key.URL -}}
						{{- $ret = merge $Page (dict "Input"
							(dict "Data" $ret)
						) -}}
						{{- $ret = partial "hestiaURL/Sanitize" $ret -}}
						{{- $ret = string $ret.Output }}
						<a href='{{- $ret -}}' class='button' download>
							{{- $i18n.Downloads.Download -}}
						</a>
					</td>
					<td>
						{{- $ret = merge $Page (dict "Input"
							(dict "Data" $v.SHA512.Value)
						) -}}
						{{- $ret = partial
							"hestiaSTRING/Sanitize"
							$ret
						-}}
						{{- $ret = partial
							"hestiaSTRING/TrimWhitespace"
							$ret.Output
						}}
						<p><code>{{- $ret -}}</code></p>
					</td>
				</tr>
				{{- end }}
			</tbody>
		</table>
	</section>


	<section id='{{- $i18n.Highlights.ID -}}'>
		<h2>{{- $i18n.Highlights.Title -}}</h2>
		<p>{{- $i18n.Highlights.Description -}}</p>


		{{- range $count, $tech := slice "Hugo" "Go" "Nim" "Rust" -}}
			{{- $data = index $lang $tech -}}
			{{- if not $data -}}
				{{- continue -}}
			{{- end -}}

			{{- if not (len $data.Highlights) -}}
				{{- continue -}}
			{{- end -}}

		<section id='{{- lower $tech -}}'>
			<h3>{{- $tech -}}</h3>
			<ol>
			{{- range $i, $v := $data.Highlights }}
				<li>
					<p>{{- safeHTML $v.HTML -}}</p>
					{{- range $j, $w := $v.URL }}
						{{- if or (not $w.Value) (not $w.Label) -}}
							{{- continue -}}
						{{- end -}}

						{{- $ret = merge $Page (dict "Input"
							(dict "Data" $w.Value)
						) -}}
						{{- $ret = partial "hestiaURL/Sanitize" $ret -}}
						{{- $ret = string $ret.Output -}}
					<a href='{{- $ret -}}'>[$w.Label]</a>
					{{- end }}
				</li>
			{{- end }}
			</ol>
		</section>
		{{- end }}
	</section>


	{{- $ret = merge $Page (dict "Input" (dict "Data"
		"/img/backgrounds/matrix-cube-lorenzo-verzini.svg"
	)) -}}
	{{- $ret = partial "hestiaURL/Sanitize" $ret -}}
	{{- $ret = string $ret.Output -}}
	<section id='{{- $i18n.Epilogue.ID -}}' class='inverted' style='
		margin-top: 10rem;
		background: url({{- $ret -}}),linear-gradient(to top,#010329,#000005)
				no-repeat
				fixed;
		background-position: center center;
		background-size: cover;
		padding-bottom: var(--main-padding-top);
	'>
		<h2>{{- $i18n.Epilogue.Title -}}</h2>
		<p>{{- $i18n.Epilogue.Description -}}</p>
		<br/>
		{{- $ret = merge $Page (dict "Input" (dict "Data" $i18n.Epilogue.URL)) -}}
		{{- $ret = partial "hestiaURL/Sanitize" $ret -}}
		{{- $ret = string $ret.Output -}}
		<a href='{{- $ret -}}' class='button' style='
			--button-color: green;
		'>{{- $i18n.Epilogue.CTA -}}</a>
	</section>
</main>
{{ partial "common/footer.html" $Page }}
{{ partial "common/nav-prime.html" $Page }}
