+++
date = "2022-07-21T11:27:19+08:00"
title = "Post-Processing/Component - HestiaHUGO's Internal Partial Function"
description = """
HestiaHUGO's internal partial functions responsible for post-processing Hestia
Component data right after parsing from Hugo data structure. This is its
technical specification intended for future maintenances and development usage.
"""
Keywords = [
	"Component",
	"Post-Processing",
	"Data",
	"Functions",
	"Hestia",
	"Partials",
	"Layouts",
	"Specifications",
	"HestiaHUGO",
	"ZORALab's Hestia",
	"Official Website",
	"ZORALab Enterprise",
	"ZORALab",
]
draft = false
layout = "single"

[menu.main]
parent = "Hestia's Partial Functions"
identifer = "hestiahugo-layouts-partials-hestia-functions-data-post-processing-component"
name = "Post-Processing/Component"
Pre = ""
weight = 1
+++

<section id="introduction">
	<h1>{{% param "title" %}}</h1>
	<p>
		{{% param "description" %}}
	</p>
</section>




<section id="objective-and-purposes">
	<h2>Objective and Purposes</h2>
	<p>
		The primary objective is to process a given Hestia's Page
		Component data into its final form, ready for use.
	</p>
</section>




<section id="how-it-works">
	<h2>How It Works</h2>
	<p>
		By default, the algorithm query the HestiaUI component from its
		internal datastore
		(<code>.Data.Hestia.Internal.Components</code>). If it is not
		found, the algorithm shall raise an error and discarded the
		component query.
		<br/><br/>
		Otherwise, the algorithm shall process each parts of the
		components starting from CSS, to HTML, then lastly Javascript.
		In CSS part, the CSS variables are horizontally merged
		(means only those specified are overwritten) on top on the
		hestiaUI default CSS variables. <code>.Code</code> from each
		parts are preprocessed with whitespace clean-up and default
		empty values.
		<br/><br/>
		Upon completion, the hestiaUI component data is ready for
		rendering and the algorithm shall return this data structure
		as result.
	</p>


	<section id="input">
		<h3>Input</h3>
		<p>
			This partial function accepts the following inputs:
			<ul>
				<li><p>
					<b><code>.Page</b></code> - required
					Hestia Page data structure.
				</p></li>
				<li><p>
					<b><code>.Input.Name</b></code> -
					the HestiaUI component ID.
				</p></li>
				<li><p>
					<b><code>.Input.CSS.Variables</b></code> -
					the CSS variables for overwriting the
					default counterparts.
				</p></li>
			</ul>
		</p>
	</section>


	<section id="algorithm">
		<h3>Working Algorithm</h3>
		<p>
			This partial function works in the following manner:
		</p>
		<ol>
			<li><p>
				Query the hestiaUI component from
				<code>.Data.Hestia.Internal.Components</code>.
				If the return value is <code>nil</code>, raise
				an error with <a href="{{< Hestia/url
				URL="/specs/hestiahugo/layouts/partials/hestia/functions/console/errorf"
				Lang="en" />}}">Hestia Console Errorf</a>
				partial function.
			</p></li>
			<li><p>
				Process the <code>.CSS.Code</code>, setting
				default as empty string, with
				<a href="{{< Hestia/url
				URL="/specs/hestiahugo/layouts/partials/hestia/functions/data/trim/whitespace"
				Lang="en" />}}">Hestia Trim Whitespace</a>
				partial function.
			</p></li>
			<li><p>
				Process the <code>.CSS.Variables</code>, setting
				default as empty map list, and merge with the
				<code>.Input.CSS.Variables</code> list.
			</p></li>
			<li><p>
				Process the <code>.HTML.Code</code>, setting
				default as empty string, with
				<a href="{{< Hestia/url
				URL="/specs/hestiahugo/layouts/partials/hestia/functions/data/trim/whitespace"
				Lang="en" />}}">Hestia Trim Whitespace</a>
				partial function.
			</p></li>
			<li><p>
				Process the <code>.JS.Code</code>, setting
				default as empty string, with
				<a href="{{< Hestia/url
				URL="/specs/hestiahugo/layouts/partials/hestia/functions/data/trim/whitespace"
				Lang="en" />}}">Hestia Trim Whitespace</a>
				partial function.
			</p></li>
		</ol>
	</section>


	<section id="output">
		<h3>Output</h3>
		<p>
			This function returns all the following possible
			outputs:
		</p>
		<ul>
			<li><p>
				<code>OK</code> - The component data has been
				successfully processed.
			</p></li>
			<li><p>
				<code>ERROR - unknown HestiaUI component</code>
				- one or more of the included component is not
				available. Check typo or support version in
				either <code>data/Hestia/Components.toml</code>
				or page-level <code>.components.toml</code>
				file. The error message is similar to the
				following:
{{% highlight bash "linenos=table,hl_lines=,linenostart=1" %}}
ERROR 2022/07/21 11:09:45
On Page     : en/specs/hestiahugo/layouts/partials/hestia/functions/console/
File        : specs/hestiahugo/layouts/partials/hestia/functions/console/_index.html
Shortcode   : not applicable
══════════════════════
unknown HestiaUI component: 'blablabla'
══════════════════════
{{% /highlight %}}
			</p></li>
		</ul>
	</section>


	<section id="known-issues">
		<h3>Known Issues</h3>
		<p>
			Here are some of the known issues:
		</p>
		<ul>
			<li><p>
				None identified.
			</p></li>
		</ul>
	</section>
</section>




<section id="usage">
	<h2>Usage</h2>
	<p>
		To use such partial function, assuming the Page context is a
		processed Hestia data structure, here is an example:
	</p>
{{% highlight html "linenos=table,hl_lines=,linenostart=1" %}}
{{- $Page := . -}}
{{- $dataList := dict -}}

{{- /* run through each Component in .Components */ -}}
{{- range $k, $v := .Components -}}
	{{- $ret = merge $v (dict "Name" $k) -}}
	{{- $ret = merge $Page (dict "Input" $ret) -}}
	{{- $ret = partial "Hestia/functions/data/post-processing/Component" $ret -}}
	{{- if $ret -}}
		{{- $dataList = merge $dataList (dict $k $ret) -}}
	{{- end -}}
{{- end -}}
{{% /highlight %}}
</section>




<section id="epilogue">
	<h2>Epilogue</h2>
	<p>
		That's all for {{% param "title" %}}.
	</p>
</section>
